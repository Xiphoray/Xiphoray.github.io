---
layout: page
title: "About"
description: "。"
header-img: "https://pics.xiphoray.cn/img/about-bg.jpg"
---
<!-- search -->
<div class="search-box-container position-relative">
    <div class="search-wrapper" id="search-wrapper">
        <span class="search-icon">
            <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
            </svg>
        </span>
        
        <input type="text" id="search-input" placeholder="输入关键词..." autocomplete="off">
        
        <span class="clear-icon" id="clear-btn" style="display:none;">
            <svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path>
            </svg>
        </span>
    </div>

    <ul id="suggestions" class="list-group position-absolute w-100" style="z-index: 1000; display:none;"></ul>
</div>

<div id="results-container" class="mt-4"></div>


<!-- TinySegmenter for CJK segmentation -->
<script src="https://cdn.jsdelivr.net/npm/tiny-segmenter"></script>

<!-- Pinyin.js -->
<script src="https://unpkg.com/pinyin-pro"></script>

<!-- Simple-Jekyll-Search -->
<script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>

<style>
/* ---------------------------
   布局容器调整
---------------------------- */
.search-box-container {
    margin-top: 20px;      /* 距顶部留空 */
    margin-right: 15px;    /* 距右侧留空 */
    margin-bottom: 1.5rem;
    position: relative;    /* 确保下拉菜单相对于此定位 */
}

#results-container {
    margin-right: 15px;    /* 结果列表距右侧留空 */
    margin-top: 1rem;
}

/* ---------------------------
   Google 风格搜索框 (本体)
---------------------------- */
.search-wrapper {
    display: flex;
    align-items: center; /* 关键：垂直居中对齐图标和文字 */
    justify-content: space-between;
    background: #fff;
    border: 1px solid #dfe1e5;
    border-radius: 24px; /* 默认胶囊圆角 */
    height: 46px;        /* 固定高度 */
    padding: 0 14px;
    box-shadow: none;
    transition: background-color 0.2s, box-shadow 0.2s, border-radius 0.1s;
    z-index: 1001;       /* 确保在建议列表之上 */
    position: relative;
}

/* 悬停效果 */
.search-wrapper:hover {
    box-shadow: 0 1px 6px rgba(32,33,36,0.28);
    border-color: rgba(223,225,229,0);
}

/* 当下拉建议出现时，搜索框变形：变为上方圆角，下方直角 */
.search-wrapper.has-suggestions {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom: 1px solid transparent; /* 隐藏中间的分隔线，制造连体感 */
    box-shadow: 0 1px 6px rgba(32,33,36,0.28);
}

/* ---------------------------
   内部元素：图标与输入框
---------------------------- */
.search-icon {
    display: flex;       /* 使用 flex 消除 span 的行高影响 */
    align-items: center;
    height: 100%;
}

.search-icon svg {
    width: 20px;
    height: 20px;
    fill: #9aa0a6;
    margin-right: 12px;
}

#search-input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    height: 100%;        /* 撑满高度 */
    font-size: 16px;
    color: #202124;
    padding: 0;
    line-height: normal; /* 确保文字垂直居中 */
}

/* 清除按钮 */
.clear-icon {
    cursor: pointer;
    padding: 8px;
    margin-right: -8px;
    display: flex;
    align-items: center;
    height: 100%;
}

.clear-icon svg {
    width: 22px;
    height: 22px;
    fill: #70757a;
}

/* ---------------------------
   下拉建议 (Google 连体风格)
---------------------------- */
#suggestions {
    position: absolute;
    top: 46px;           /* 紧贴搜索框底部 (等于搜索框高度) */
    left: 0;
    right: 0;
    margin-top: 0;       /* 移除间距 */
    
    background: #fff;
    border: 1px solid #dfe1e5;
    border-top: none;    /* 去掉顶部边框，与搜索框融合 */
    
    /* 仅下方圆角 */
    border-radius: 0 0 24px 24px; 
    
    box-shadow: 0 4px 6px rgba(32,33,36,0.28);
    padding-bottom: 8px;
    padding-top: 0;      /* 移除顶部内边距 */
    overflow: hidden;
    z-index: 1000;
}

/* 建议列表项 - 增加紧凑感 */
#suggestions li {
    cursor: pointer;
    padding: 8px 20px 8px 48px; /* 左侧留出空间对应上方的放大镜图标位置 */
    font-size: 14px;
    color: #202124;
    border-bottom: none; /* 移除分割线，Google风格通常没有横线 */
    line-height: 20px;
}

#suggestions li:hover, #suggestions li.active {
    background: #eee;
    font-weight: normal; /* 保持字重，避免跳动 */
}

/* ---------------------------
   搜索结果卡片 (紧凑版)
---------------------------- */
.search-result-item {
    background: #fff;
    padding: 15px 18px;  /* 减小内边距，更紧凑 */
    margin-bottom: 5px; /* 减小卡片间距 */
    border-radius: 8px;  /* 圆角稍微改小一点点 */
    border: 1px solid #e0e0e0; /* 边框颜色加深一点，增强界限 */
    box-shadow: none;    /* 默认去掉阴影，更像文档列表 */
    transition: background 0.2s, box-shadow 0.2s;
}

.search-result-item:hover {
    background: #fafafa;
    box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    transform: none; /* 取消上浮动画，保持稳重 */
}

.search-result-item a {
    font-size: 1.15rem; /* 标题字体稍微调小 */
    font-weight: 500;   /* 稍微减细 */
    color: #1a0dab;
    text-decoration: none;
    display: block;
    margin-bottom: 4px; /* 标题和内容间距更小 */
    line-height: 1.3;
}

.search-snippet {
    color: #4d5156;
    font-size: 13px;    /* 摘要字体调小 */
    line-height: 1.5;   /* 行高更紧凑 */
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2; /* 限制显示两行 (如果浏览器支持) */
    -webkit-box-orient: vertical;
    overflow: hidden;
}

mark {
    background: transparent;
    color: #d93025; /* 关键词改为红色高亮，或者保留背景 */
    font-weight: 700;
    padding: 0;
}
</style>

<script>
/* ---------------------------
   中文分词
---------------------------- */
function chineseSegment(str) {
  return str.replace(/([\u4e00-\u9fa5])/g, ' $1 ').trim();
}

/* ---------------------------
   智能摘要：截取关键词附近内容
---------------------------- */
function smartSnippet(content, keywords) {
  if (!keywords.length) return content.substring(0, 120) + '...';

  let lower = content.toLowerCase();
  let idx = -1;

  for (let k of keywords) {
    let pos = lower.indexOf(k.toLowerCase());
    if (pos !== -1) {
      idx = pos;
      break;
    }
  }

  if (idx === -1) return content.substring(0, 120) + '...';

  let start = Math.max(0, idx - 40);
  let end = Math.min(content.length, idx + 80);
  return (start > 0 ? '...' : '') + content.substring(start, end) + (end < content.length ? '...' : '');
}

/* ---------------------------
   关键词高亮
---------------------------- */
function highlight(text, keywords) {
  if (!keywords || keywords.length === 0) return text;

  let pattern = keywords
    .map(k => k.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'))
    .join('|');

  let regex = new RegExp(pattern, 'gi');
  return text.replace(regex, match => `<mark>${match}</mark>`);
}

/* ---------------------------
   即时下拉建议 + 键盘选择
---------------------------- */
let allTitles = [];
let suggestionIndex = -1;

fetch('{{ site.baseurl }}/search.json')
  .then(res => res.json())
  .then(data => {
    allTitles = data.map(item => item.title);
  });

function showSuggestions(query) {
  let list = document.getElementById('suggestions');
  if (!query) {
    list.style.display = 'none';
    return;
  }

  let q = query.toLowerCase();
  let matched = allTitles.filter(t => t.toLowerCase().includes(q)).slice(0, 5);

  if (matched.length === 0) {
    list.style.display = 'none';
    return;
  }

  list.innerHTML = matched.map(t => `<li class="list-group-item">${highlight(t, [query])}</li>`).join('');
  list.style.display = 'block';

  [...list.children].forEach((li, idx) => {
    li.onclick = () => {
      document.getElementById('search-input').value = li.innerText;
      list.style.display = 'none';
      document.getElementById('search-input').dispatchEvent(new Event('input'));
    };
  });
}

function moveSuggestion(direction) {
  let list = document.getElementById('suggestions');
  let items = [...list.children];
  if (items.length === 0) return;

  suggestionIndex = (suggestionIndex + direction + items.length) % items.length;

  items.forEach(i => i.classList.remove('active'));
  items[suggestionIndex].classList.add('active');

  document.getElementById('search-input').value = items[suggestionIndex].innerText;
}

/* ---------------------------
   初始化搜索
---------------------------- */
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('results-container'),
  json: '{{ site.baseurl }}/search.json',

  fuzzy: true,

  searchResultTemplate: `
    <div class="search-result-item">
      <a href="{url}">{title}</a>
      <p class="search-snippet">{content}</p>
    </div>
  `,

  noResultsText: '<p class="text-muted">未找到相关内容</p>',

  templateMiddleware: function(prop, value, template) {
    let query = document.getElementById('search-input').value.trim();

    // 分词
    let segmenter = new TinySegmenter();
    let words = segmenter.segment(query)
      .concat(chineseSegment(query).split(/\s+/))
      .filter(w => w);

    // 拼音搜索（全拼 + 首字母）
    let pinyinFull = window.pinyinPro.pinyin(query, { toneType: 'none', type: 'array' });
    let pinyinFirst = window.pinyinPro.pinyin(query, { pattern: 'first', type: 'array' });

    words = words.concat(pinyinFull).concat(pinyinFirst);

    if (prop === 'content') {
      let snippet = smartSnippet(value, words);
      return highlight(snippet, words);
    }

    if (prop === 'title') {
      return highlight(value, words);
    }

    return value;
  }
});
/* ---------------------------
   交互逻辑：搜索框 + 清除按钮 + 样式联动
---------------------------- */
const searchInput = document.getElementById('search-input');
const clearBtn = document.getElementById('clear-btn');
const suggestionsList = document.getElementById('suggestions');
const searchWrapper = document.getElementById('search-wrapper'); // 获取包裹容器

// 辅助函数：控制建议栏显示状态
function toggleSuggestions(show) {
    if (show) {
        suggestionsList.style.display = 'block';
        searchWrapper.classList.add('has-suggestions'); // 添加类：搜索框变直角
    } else {
        suggestionsList.style.display = 'none';
        searchWrapper.classList.remove('has-suggestions'); // 移除类：搜索框恢复胶囊
    }
}
/* ---------------------------
   输入监听 + 键盘事件
---------------------------- */
document.getElementById('search-input').addEventListener('input', e => {
  // 1. 控制清除按钮
    if (e.target.value.length > 0) {
        clearBtn.style.display = 'flex';
    } else {
        clearBtn.style.display = 'none';
        toggleSuggestions(false); // 输入为空隐藏建议
    }
  suggestionIndex = -1;
  showSuggestions(e.target.value);
});

// 监听建议列表的子元素变化 (因为插件是异步填充 li 的)
const observer = new MutationObserver(function(mutations) {
    if (suggestionsList.children.length > 0 && searchInput.value.length > 0) {
        toggleSuggestions(true);
    } else {
        toggleSuggestions(false);
    }
});
observer.observe(suggestionsList, { childList: true });

document.getElementById('search-input').addEventListener('keydown', e => {
  if (e.key === 'ArrowDown') {
    moveSuggestion(1);
    e.preventDefault();
  } else if (e.key === 'ArrowUp') {
    moveSuggestion(-1);
    e.preventDefault();
  } else if (e.key === 'Enter') {
    document.getElementById('suggestions').style.display = 'none';
  }
});
// 点击页面其他地方关闭建议
document.addEventListener('click', function(e) {
    if (!searchWrapper.contains(e.target) && !suggestionsList.contains(e.target)) {
        toggleSuggestions(false);
    }
});

// 聚焦输入框时，如果原本有内容，重新显示建议
searchInput.addEventListener('focus', function() {
    if (this.value.length > 0 && suggestionsList.children.length > 0) {
        toggleSuggestions(true);
    }
});

// 点击 X 按钮清空
clearBtn.addEventListener('click', function() {
    searchInput.value = ''; // 清空值
    clearBtn.style.display = 'none'; // 隐藏 X
    suggestionsList.style.display = 'none'; // 隐藏建议
    searchInput.focus(); // 重新聚焦
    
    // 关键：手动触发 input 事件，让 SimpleJekyllSearch 插件感知到内容已被清空
    // 从而清空下方的搜索结果列表
    const event = new Event('input', { bubbles: true });
    searchInput.dispatchEvent(event);
});
</script>


<!-- Language Selector -->

<!-- Chinese Version -->
<div class="zh post-container">
    {% capture about_zh %}{% include about/zh.md %}{% endcapture %}
    {{ about_zh | markdownify }}
</div>

<!-- English Version -->
<div class="en post-container">
    {% capture about_en %}{% include about/en.md %}{% endcapture %}
    {{ about_en | markdownify }}
</div>

<!-- Handle Language Change -->
<script type="text/javascript">
    // get nodes
    var $zh = document.querySelector(".zh");
    var $en = document.querySelector(".en");
    var $select = document.querySelector("select");

    // bind hashchange event
    window.addEventListener('hashchange', _render);

    // handle render
    function _render(){
        var _hash = window.location.hash;
        // en
        if(_hash == "#en"){
            $select.selectedIndex = 1;
            $en.style.display = "block";
            $zh.style.display = "none";
        // zh by default
        }else{
            // not trigger onChange, otherwise cause a loop call.
            $select.selectedIndex = 0;
            $zh.style.display = "block";
            $en.style.display = "none";
        }
    }

    // handle select change
    function onLanChange(index){
        if(index == 0){
            window.location.hash = "#zh"
        }else{
            window.location.hash = "#en"
        }
    }

    // init
    _render();
</script>

				<Br/>
				<Br/>
				<Br/>
                <iframe src="https://www.google.com/maps/d/embed?mid=1K6K6oSrxoXAS2RcPjPWaQ0WGxuC5zeoR" 
                    width="100%" height="480"></iframe>
				<Br/>
				<Br/>
				<Br/>
				<Br/>
				<Br/>
				<div id="share-button-5" class="need-share-button-default need-share-button shownoshow" data-share-position="middleRight" data-share-icon-style="box" data-share-networks="Wechat,QQZone,Weibo,Facebook,Douban">Share</div>
			
				<br/>
				<br/>
				<!-- isso 评论框 start -->
				<link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/css/comments.css">

				<script data-isso="https://disc.xiphoray.cn/"
						src="{{ site.baseurl }}/js/isso.embed.min.js"
						data-isso-vote="true" data-isso-avatar="true"
						data-isso-css="false"></script>

				<section id="isso-thread"
						 data-title="about"
						 data-isso-id="about"
						 
						 ></section>
				<!-- isso 评论框 start -->
			 <!-- intensedebate 评论框 start -->
				<!--<script>
				var idcomments_acct = '0927afe34f22b7458b464a6ca26d9058';
				var idcomments_post_id;
				var idcomments_post_url;
				</script>
				<span id="IDCommentsPostTitle" style="display:none"></span>
				<script type='text/javascript' src='https://www.intensedebate.com/js/genericCommentWrapperV2.js'></script> -->
				
{% if site.duoshuo_username %}
<!-- 多说评论框 start -->
<div class="comment">
    <!-- This id is used for indexing my loss comments forcedly -->
    <div class="ds-thread"
    {% if site.duoshuo_username == "huxblog" %}
        data-thread-id="1187623191091085319"
    {% else %}
    <!-- U can just use this key generated to index comments at page about -->
        data-thread-key="{{site.duoshuo_username}}/about"
    {% endif %}

    data-title="{{page.title}}"
    data-url="{{site.url}}/about/"></div>
</div>
<!-- 多说评论框 end -->

<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    // dynamic User hacking by Hux
    var _user = '{{site.duoshuo_username}}';

    // duoshuo comment query.
    var duoshuoQuery = {short_name: _user };
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->
{% endif %}


{% if site.disqus_username %}
<!-- disqus 评论框 start -->
<div class="comment">
    <div id="disqus_thread" class="disqus-thread">

    </div>
</div>
<!-- disqus 评论框 end -->

<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://xiphoray.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- disqus 公共JS代码 end -->
{% endif %}

<style>
	.shownoshow:hover, .shownoshow:focus {
    color: #fff;
    background-color: #0085a1;
    border: 1px solid #0085a1;
	}
</style>